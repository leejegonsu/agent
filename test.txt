SELECT replace(report_user_phone, '-', '')
FROM (
         SELECT
             u.id AS report_user_id,
             u.name AS report_user_name,
             r.user_phone AS report_user_phone
         FROM report_check AS rc
                  INNER JOIN report AS r
                             ON rc.report_seq = r.seq
                  LEFT JOIN users AS u
                            ON r.user_id = u.id
                  LEFT JOIN agents_in_users AS rau
                            ON u.id = rau.user_id
                  LEFT JOIN agent AS a
                            ON rau.agent_id = a.id
                  INNER JOIN room_info AS ri
                             ON r.room_seq = ri.seq
                  INNER JOIN users AS ru
                             ON ri.user_id = ru.id
                  LEFT JOIN agents_in_users AS au
                            ON ru.id = au.user_id
                  LEFT JOIN agent As ra
                            ON au.agent_id = ra.id
                  LEFT JOIN agents_in_users AS ae
                            ON ra.id = ae.agent_id AND ae.is_primary = true
         WHERE (
                   SELECT
                       MAX(seq)
                   FROM report_check
                   WHERE report_seq = rc.report_seq
               ) = rc.seq
           and r.reward_status = 0
           and r.by_admin = false
           AND rc.saved_time BETWEEN '2020-09-27 15:00:00.000000' AND '2020-10-25 14:59:59.99999'
     )AS a
GROUP BY replace(report_user_phone, '-', '');
